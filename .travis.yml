language: node_js
node_js:
  - "9"
env:
  - NODE_ENV=development ARTIFACTS_DIR=$TRAVIS_BUILD_DIR/artifacts
sudo: enabled
before_script:
  - mkdir -p $ARTIFACTS_DIR
  - touch $ARTIFACTS_DIR/testfile
#  - echo arangodb3 arangodb/password password root | sudo debconf-set-selections  # set username 'root'
#  - echo arangodb3 arangodb/password_again password root | sudo debconf-set-selections  # set password 'root'
#  - chmod +x setup_arangodb.sh
#  - ./setup_arangodb.sh &> /dev/null
#  - rm -rf ArangoDB-3.2.2.tar.gz
#  - cp .origintrail_noderc.travis .origintrail_noderc
#  - npm run bootstrap
#  - npm install -g ganache-cli@6.1.5 &> /dev/null
#  - npm install -g truffle@5.0.0-beta.1 &> /dev/null
script:
  - touch $ARTIFACTS_DIR/file
#  - npm run lint
#  - 'if [ "$TRAVIS_EVENT_TYPE" != "push" ]; then npm run test:bdd; fi'
#  # checks for arangodb based solution
#  - npm test 2> $ARTIFACTS_DIR/mocha-logs.log
#  - npm start &> $ARTIFACTS_DIR/app-start.log &
#  - sleep 10
#  - jobs
#  - if [ -n "$(jobs -p)" ]; then kill %1; fi
#  # compile and check Smart Contracts
#  - ganache-cli -i 5777 -p 7545 -l 10000000 -m "aspect ask story desert profit engage tuition leave fade giraffe exclude brief" &> $ARTIFACTS_DIR/ganache.log &
#  - cd modules/Blockchain/Ethereum
#  - truffle test --network test > $ARTIFACTS_DIR/truffle-test.log
#  - rm -rf build && truffle migrate --reset --compile-all --network ganache > $ARTIFACTS_DIR/truffle-migrate.log
#  - cd $TRAVIS_BUILD_DIR
#  - jobs
#  - kill %1
after_script:
  - s3cmd put --recursive $ARTIFACTS_DIR/* s3://ot-travis-ci/${TRAVIS_REPO_SLUG}/${TRAVIS_BUILD_NUMBER}/${TRAVIS_JOB_NUMBER}/
#  - kill -9 $(pgrep arangod)
