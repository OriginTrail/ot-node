language: node_js
node_js:
  - "9"
services:
  - mongodb
before_install:
- cp .env.example .env
- echo arangodb3 arangodb/password password root | sudo debconf-set-selections  # set username 'root'
- echo arangodb3 arangodb/password_again password root | sudo debconf-set-selections  # set password 'root'
- chmod +x setup_arangodb.sh
- ./setup_arangodb.sh
- rm -rf ArangoDB-3.2.2.tar.gz
- cd ArangoDB-3.2.2 && touch .eslintignore && find . -name '*.js' >> .eslintignore && cd ..
script:
  - npm run lint
  - npm test
after_script:
- kill -9 $(pgrep arangod)